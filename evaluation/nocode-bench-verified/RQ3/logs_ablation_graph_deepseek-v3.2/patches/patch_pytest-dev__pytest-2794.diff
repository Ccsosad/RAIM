diff --git a/_pytest/logging.py b/_pytest/logging.py
new file mode 100644
index 0000000..e4dbdbc
--- /dev/null
+++ b/_pytest/logging.py
@@ -0,0 +1,312 @@
+"""
+Logging support for pytest.
+"""
+import logging
+import sys
+import warnings
+from contextlib import contextmanager
+
+import py
+import six
+
+import _pytest
+from _pytest import fixtures
+from _pytest.compat import _PY2
+from _pytest.config import hookimpl
+from _pytest.deprecated import PYTEST_LOGWARNING
+from _pytest.main import Session
+
+DEFAULT_LOG_FORMAT = '%(levelname)-8s %(name)s %(message)s'
+DEFAULT_LOG_DATE_FORMAT = '%H:%M:%S'
+
+
+class LoggingPlugin(object):
+    """Attaches to the logging module and captures log messages for each test.
+    """
+
+    def __init__(self, config):
+        self._config = config
+        self._captured_logs = []
+        self._handler = None
+        self._level = None
+        self._formatter = None
+        self._logger = None
+        self._log_cli_handler = None
+        self._log_file_handler = None
+
+    @hookimpl(hookwrapper=True)
+    def pytest_runtest_setup(self, item):
+        self._start_capturing()
+        yield
+        self._stop_capturing()
+
+    @hookimpl(hookwrapper=True)
+    def pytest_runtest_call(self, item):
+        self._start_capturing()
+        yield
+        self._stop_capturing()
+
+    @hookimpl(hookwrapper=True)
+    def pytest_runtest_teardown(self, item):
+        self._start_capturing()
+        yield
+        self._stop_capturing()
+
+    def _start_capturing(self):
+        root_logger = logging.getLogger()
+        if self._handler is None:
+            self._handler = LogCaptureHandler()
+            self._handler.setFormatter(self._get_formatter())
+            self._level = root_logger.getEffectiveLevel()
+            self._logger = root_logger
+        root_logger.addHandler(self._handler)
+        root_logger.setLevel(logging.NOTSET)
+
+    def _stop_capturing(self):
+        if self._handler is not None:
+            self._logger.removeHandler(self._handler)
+
+    def _get_formatter(self):
+        if self._formatter is None:
+            self._formatter = logging.Formatter(
+                self._config.getoption('log_format'),
+                self._config.getoption('log_date_format')
+            )
+        return self._formatter
+
+    @hookimpl
+    def pytest_runtest_logstart(self, nodeid, location):
+        self._captured_logs.append([])
+
+    @hookimpl
+    def pytest_runtest_logreport(self, report):
+        if report.when == 'call' and report.failed and self._config.getoption('log_print'):
+            self._add_logs_to_report(report)
+
+    def _add_logs_to_report(self, report):
+        if not self._captured_logs:
+            return
+        logs = self._captured_logs.pop(0)
+        if logs:
+            longrepr = getattr(report, 'longrepr', None)
+            if hasattr(longrepr, 'addsection'):
+                longrepr.addsection('Captured stdlog call', '\n'.join(logs))
+
+    @hookimpl
+    def pytest_configure(self, config):
+        self._setup_cli_logging(config)
+        self._setup_file_logging(config)
+
+    def _setup_cli_logging(self, config):
+        log_cli_level = config.getoption('log_cli_level')
+        if log_cli_level is None:
+            return
+        level = _parse_log_level(log_cli_level)
+        handler = logging.StreamHandler(sys.stderr)
+        handler.setLevel(level)
+        formatter = logging.Formatter(
+            config.getoption('log_cli_format'),
+            config.getoption('log_cli_date_format')
+        )
+        handler.setFormatter(formatter)
+        logging.getLogger().addHandler(handler)
+        self._log_cli_handler = handler
+
+    def _setup_file_logging(self, config):
+        log_file = config.getoption('log_file')
+        if log_file is None:
+            return
+        level = _parse_log_level(config.getoption('log_file_level'))
+        handler = logging.FileHandler(log_file, mode='w')
+        handler.setLevel(level)
+        formatter = logging.Formatter(
+            config.getoption('log_file_format'),
+            config.getoption('log_file_date_format')
+        )
+        handler.setFormatter(formatter)
+        logging.getLogger().addHandler(handler)
+        self._log_file_handler = handler
+
+    @hookimpl
+    def pytest_unconfigure(self, config):
+        if self._log_cli_handler is not None:
+            logging.getLogger().removeHandler(self._log_cli_handler)
+            self._log_cli_handler = None
+        if self._log_file_handler is not None:
+            logging.getLogger().removeHandler(self._log_file_handler)
+            self._log_file_handler = None
+
+
+class LogCaptureHandler(logging.Handler):
+    """A logging handler that stores log records and the log text."""
+
+    def __init__(self):
+        logging.Handler.__init__(self)
+        self.records = []
+
+    def emit(self, record):
+        self.records.append(record)
+
+    def reset(self):
+        self.records = []
+
+
+class LogCaptureFixture(object):
+    """Provides access and control of log capturing."""
+
+    def __init__(self, item):
+        self._item = item
+        self._handler = None
+
+    @property
+    def handler(self):
+        if self._handler is None:
+            self._handler = LogCaptureHandler()
+            self._handler.setFormatter(self._get_formatter())
+        return self._handler
+
+    def _get_formatter(self):
+        plugin = self._item.config.pluginmanager.get_plugin('logging-plugin')
+        if plugin is not None:
+            return plugin._get_formatter()
+        return logging.Formatter(DEFAULT_LOG_FORMAT, DEFAULT_LOG_DATE_FORMAT)
+
+    def set_level(self, level, logger=None):
+        """Set the level of a logger for the duration of a test."""
+        if logger is None:
+            logger = logging.getLogger()
+        elif isinstance(logger, six.string_types):
+            logger = logging.getLogger(logger)
+        self._original_level = logger.level
+        logger.setLevel(level)
+
+    @contextmanager
+    def at_level(self, level, logger=None):
+        """Context manager that sets the level for a logger."""
+        if logger is None:
+            logger = logging.getLogger()
+        elif isinstance(logger, six.string_types):
+            logger = logging.getLogger(logger)
+        original_level = logger.level
+        logger.setLevel(level)
+        try:
+            yield
+        finally:
+            logger.setLevel(original_level)
+
+    @property
+    def text(self):
+        """Return the formatted log text."""
+        return '\n'.join(self.handler.format(record) for record in self.records)
+
+    @property
+    def records(self):
+        """Return the list of log records."""
+        return self.handler.records
+
+    @property
+    def record_tuples(self):
+        """Return a list of a stripped down version of log records intended
+        for use in assertion comparison."""
+        return [(r.name, r.levelno, r.getMessage()) for r in self.records]
+
+    def clear(self):
+        """Reset the list of log records."""
+        self.handler.reset()
+
+
+@fixtures.fixture
+def caplog(request):
+    """Access and control log capturing."""
+    return LogCaptureFixture(request.node)
+
+
+def _parse_log_level(level):
+    if isinstance(level, six.string_types):
+        level = level.upper()
+    try:
+        return int(level)
+    except ValueError:
+        pass
+    return getattr(logging, level, logging.NOTSET)
+
+
+def pytest_addoption(parser):
+    """Add options to control log capturing."""
+    group = parser.getgroup('logging')
+    group.addoption(
+        '--log-level',
+        '--log-level',
+        default=None,
+        help='logging level used by the logging module'
+    )
+    group.addoption(
+        '--log-format',
+        default=DEFAULT_LOG_FORMAT,
+        help='log format as used by the logging module.'
+    )
+    group.addoption(
+        '--log-date-format',
+        default=DEFAULT_LOG_DATE_FORMAT,
+        help='log date format as used by the logging module.'
+    )
+    group.addoption(
+        '--log-cli-level',
+        default=None,
+        help='cli logging level.'
+    )
+    group.addoption(
+        '--log-cli-format',
+        default=None,
+        help='log format as used by the logging module.'
+    )
+    group.addoption(
+        '--log-cli-date-format',
+        default=None,
+        help='log date format as used by the logging module.'
+    )
+    group.addoption(
+        '--log-file',
+        default=None,
+        help='path to a file when logging will be written to.'
+    )
+    group.addoption(
+        '--log-file-level',
+        default='NOTSET',
+        help='log file logging level.'
+    )
+    group.addoption(
+        '--log-file-format',
+        default=DEFAULT_LOG_FORMAT,
+        help='log format as used by the logging module.'
+    )
+    group.addoption(
+        '--log-file-date-format',
+        default=DEFAULT_LOG_DATE_FORMAT,
+        help='log date format as used by the logging module.'
+    )
+    group.addoption(
+        '--no-print-logs',
+        dest='log_print',
+        default=True,
+        action='store_false',
+        help='disable printing captured logs on failed tests.'
+    )
+    parser.addini('log_level', help='logging level used by the logging module')
+    parser.addini('log_format', help='log format as used by the logging module.')
+    parser.addini('log_date_format', help='log date format as used by the logging module.')
+    parser.addini('log_cli_level', help='cli logging level.')
+    parser.addini('log_cli_format', help='log format as used by the logging module.')
+    parser.addini('log_cli_date_format', help='log date format as used by the logging module.')
+    parser.addini('log_file', help='path to a file when logging will be written to.')
+    parser.addini('log_file_level', help='log file logging level.')
+    parser.addini('log_file_format', help='log format as used by the logging module.')
+    parser.addini('log_file_date_format', help='log date format as used by the logging module.')
+    parser.addini('log_print', type='bool', default=True,
+                  help='enable printing captured logs on failed tests.')
+
+
+def pytest_configure(config):
+    """Setup the logging plugin."""
+    plugin = LoggingPlugin(config)
+    config.pluginmanager.register(plugin, 'logging-plugin')
