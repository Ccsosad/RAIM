diff --git a/django/urls/resolvers.py b/django/urls/resolvers.py
index eb43231..4388118 100644
--- a/django/urls/resolvers.py
+++ b/django/urls/resolvers.py
@@ -41,6 +41,8 @@ class ResolverMatch:
         namespaces=None,
         route=None,
         tried=None,
+        captured_kwargs=None,
+        extra_kwargs=None,
     ):
         self.func = func
         self.args = args
@@ -48,6 +50,15 @@ class ResolverMatch:
         self.url_name = url_name
         self.route = route
         self.tried = tried
+        if captured_kwargs is not None and extra_kwargs is not None:
+            self.captured_kwargs = captured_kwargs
+            self.extra_kwargs = extra_kwargs
+        else:
+            # For backward compatibility, if captured_kwargs and extra_kwargs are not provided,
+            # we set them to empty dictionaries. This is not ideal, but it maintains compatibility.
+            # In practice, this should only happen in old code that doesn't pass them.
+            self.captured_kwargs = {}
+            self.extra_kwargs = {}
 
         # If a URLRegexResolver doesn't have a namespace or app_name, it passes
         # in an empty value.
@@ -78,7 +89,7 @@ class ResolverMatch:
             func = self._func_path
         return (
             "ResolverMatch(func=%s, args=%r, kwargs=%r, url_name=%r, "
-            "app_names=%r, namespaces=%r, route=%r)"
+            "app_names=%r, namespaces=%r, route=%r, captured_kwargs=%r, extra_kwargs=%r)"
             % (
                 func,
                 self.args,
@@ -87,6 +98,8 @@ class ResolverMatch:
                 self.app_names,
                 self.namespaces,
                 self.route,
+                getattr(self, 'captured_kwargs', {}),
+                getattr(self, 'extra_kwargs', {}),
             )
         )
 
@@ -669,15 +682,27 @@ class URLResolver:
                             else str(pattern.pattern)
                         )
                         self._extend_tried(tried, pattern, sub_match.tried)
+                        # Calculate captured_kwargs and extra_kwargs
+                        if hasattr(sub_match, 'captured_kwargs'):
+                            captured_kwargs = {**kwargs, **sub_match.captured_kwargs}
+                            extra_kwargs = {**self.default_kwargs, **sub_match.extra_kwargs}
+                        else:
+                            # For backward compatibility with old ResolverMatch objects
+                            captured_kwargs = kwargs
+                            extra_kwargs = self.default_kwargs
+                        # Merge captured and extra to form the total kwargs
+                        merged_kwargs = {**captured_kwargs, **extra_kwargs}
                         return ResolverMatch(
                             sub_match.func,
                             sub_match_args,
-                            sub_match_dict,
+                            merged_kwargs,
                             sub_match.url_name,
                             [self.app_name] + sub_match.app_names,
                             [self.namespace] + sub_match.namespaces,
                             self._join_route(current_route, sub_match.route),
                             tried,
+                            captured_kwargs=captured_kwargs,
+                            extra_kwargs=extra_kwargs,
                         )
                     tried.append([pattern])
             raise Resolver404({"tried": tried, "path": new_path})
