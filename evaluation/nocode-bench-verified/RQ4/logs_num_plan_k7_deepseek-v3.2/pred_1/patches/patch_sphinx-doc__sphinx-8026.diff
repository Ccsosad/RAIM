diff --git a/sphinx/builders/__init__.py b/sphinx/builders/__init__.py
index 796b7ad..76eeee2 100644
--- a/sphinx/builders/__init__.py
+++ b/sphinx/builders/__init__.py
@@ -107,6 +107,8 @@ class Builder:
         self.imagedir = ""
         # relative path to image directory from current docname (used at writing docs)
         self.imgpath = ""
+        # current document's directory path for {docpath} token
+        self.docpath = ""           # type: str
 
         # these get set later
         self.parallel_ok = False
@@ -617,4 +619,4 @@ class Builder:
             return getattr(self.config, optname)
         except AttributeError:
             optname = '%s_%s' % (default, option)
-            return getattr(self.config, optname)
+            return getattr(self.config, optname)
diff --git a/sphinx/builders/html/__init__.py b/sphinx/builders/html/__init__.py
index c052c27..4983e7f 100644
--- a/sphinx/builders/html/__init__.py
+++ b/sphinx/builders/html/__init__.py
@@ -594,6 +594,10 @@ class StandaloneHTMLBuilder(Builder):
         self.imgpath = relative_uri(self.get_target_uri(docname), '_images')
         self.dlpath = relative_uri(self.get_target_uri(docname), '_downloads')
         self.current_docname = docname
+        # set docpath for {docpath} token
+        import posixpath
+        dirname = posixpath.dirname(docname)
+        self.docpath = dirname + '/' if dirname else ''
         self.docwriter.write(doctree, destination)
         self.docwriter.assemble_parts()
         body = self.docwriter.parts['fragment']
