diff --git a/_pytest/config/__init__.py b/_pytest/config/__init__.py
new file mode 100644
index 0000000..31d0d43
--- /dev/null
+++ b/_pytest/config/__init__.py
@@ -0,0 +1,82 @@
+import logging
+import warnings
+
+def pytest_addoption(parser):
+    group = parser.getgroup("logging")
+    group.addoption(
+        "--log-level",
+        dest="log_level",
+        default=None,
+        help="logging level used by the logging module"
+    )
+    group.addoption(
+        "--log-format",
+        dest="log_format",
+        default="%(levelname)-8s %(name)s %(message)s",
+        help="log format as used by the logging module."
+    )
+    group.addoption(
+        "--log-date-format",
+        dest="log_date_format",
+        default=None,
+        help="log date format as used by the logging module."
+    )
+    group.addoption(
+        "--log-cli-level",
+        dest="log_cli_level",
+        default=None,
+        help="cli logging level."
+    )
+    group.addoption(
+        "--log-cli-format",
+        dest="log_cli_format",
+        default=None,
+        help="log format as used by the logging module."
+    )
+    group.addoption(
+        "--log-cli-date-format",
+        dest="log_cli_date_format",
+        default=None,
+        help="log date format as used by the logging module."
+    )
+    group.addoption(
+        "--log-file",
+        dest="log_file",
+        default=None,
+        help="log file path."
+    )
+    group.addoption(
+        "--log-file-level",
+        dest="log_file_level",
+        default=None,
+        help="log file level."
+    )
+    group.addoption(
+        "--log-file-format",
+        dest="log_file_format",
+        default=None,
+        help="log file format."
+    )
+    group.addoption(
+        "--log-file-date-format",
+        dest="log_file_date_format",
+        default=None,
+        help="log file date format."
+    )
+    group.addoption(
+        "--no-print-logs",
+        dest="log_print",
+        action="store_false",
+        default=True,
+        help="disable printing captured logs on failed tests."
+    )
+
+def pytest_configure(config):
+    if config.getoption("log_level") is not None:
+        warnings.warn(
+            "--log-level is deprecated and will be removed in a future release. "
+            "Please use --log-cli-level instead.",
+            DeprecationWarning
+        )
+        if config.getoption("log_cli_level") is None:
+            config.option.log_cli_level = config.getoption("log_level")
diff --git a/_pytest/logging.py b/_pytest/logging.py
new file mode 100644
index 0000000..8bff9f1
--- /dev/null
+++ b/_pytest/logging.py
@@ -0,0 +1,106 @@
+import logging
+import io
+import contextlib
+from _pytest.config import hookimpl
+from _pytest.fixtures import fixture
+
+class LogCaptureHandler(logging.Handler):
+    def __init__(self):
+        logging.Handler.__init__(self)
+        self.records = []
+        self.stream = io.StringIO()
+
+    def emit(self, record):
+        self.records.append(record)
+        self.stream.write(self.format(record) + '\n')
+
+    def reset(self):
+        self.records = []
+        self.stream = io.StringIO()
+
+class LogCaptureFixture:
+    def __init__(self, handler):
+        self.handler = handler
+        self._initial_levels = {}
+
+    @property
+    def records(self):
+        return self.handler.records
+
+    @property
+    def text(self):
+        return self.handler.stream.getvalue()
+
+    @property
+    def record_tuples(self):
+        return [(r.name, r.levelno, r.getMessage()) for r in self.records]
+
+    def set_level(self, level, logger=None):
+        if logger is None:
+            logger = self.handler
+        else:
+            logger = logging.getLogger(logger)
+        self._initial_levels.setdefault(logger, logger.level)
+        logger.setLevel(level)
+
+    @contextlib.contextmanager
+    def at_level(self, level, logger=None):
+        if logger is None:
+            logger = self.handler
+        else:
+            logger = logging.getLogger(logger)
+        original_level = logger.level
+        logger.setLevel(level)
+        try:
+            yield
+        finally:
+            logger.setLevel(original_level)
+
+    def clear(self):
+        self.handler.reset()
+
+@fixture
+def caplog(request):
+    handler = request.node._logging_handler
+    if handler is None:
+        raise RuntimeError("Logging handler not found. Is the logging plugin enabled?")
+    return LogCaptureFixture(handler)
+
+class LoggingPlugin:
+    def __init__(self, config):
+        self.config = config
+        self.handler = None
+        self._captured_logs = []
+
+    @hookimpl(hookwrapper=True)
+    def pytest_runtest_setup(self, item):
+        self.handler = LogCaptureHandler()
+        item._logging_handler = self.handler
+        logging.root.addHandler(self.handler)
+        yield
+        logging.root.removeHandler(self.handler)
+        item._logging_handler = None
+
+    @hookimpl(hookwrapper=True)
+    def pytest_runtest_teardown(self, item):
+        self.handler = LogCaptureHandler()
+        item._logging_handler = self.handler
+        logging.root.addHandler(self.handler)
+        yield
+        logging.root.removeHandler(self.handler)
+        item._logging_handler = None
+
+    @hookimpl
+    def pytest_runtest_makereport(self, item, call):
+        if call.when == "call":
+            handler = item._logging_handler
+            if handler is not None and self.config.getoption("log_print"):
+                if call.excinfo is not None:
+                    # test failed
+                    if handler.records:
+                        longrepr = getattr(call, 'longrepr', None)
+                        if longrepr is not None:
+                            longrepr.addsection('Captured stdlog call', handler.stream.getvalue())
+
+def pytest_configure(config):
+    config.pluginmanager.register(LoggingPlugin(config), "logging")
