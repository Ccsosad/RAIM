diff --git a/_pytest/capture.py b/_pytest/capture.py
index 2a7dde5..e1c34cc 100644
--- a/_pytest/capture.py
+++ b/_pytest/capture.py
@@ -29,6 +29,75 @@ def pytest_addoption(parser):
     group._addoption(
         '-s', action="store_const", const="no", dest="capture",
         help="shortcut for --capture=no.")
+    
+    # Add logging-related options to the general group
+    group._addoption(
+        '--log-level',
+        dest='log_level',
+        default=None,
+        help='Default logging level for tests'
+    )
+    group._addoption(
+        '--log-format',
+        dest='log_format',
+        default='%(levelname)-8s %(name)s %(message)s',
+        help='Log format used by the logging module'
+    )
+    group._addoption(
+        '--log-date-format',
+        dest='log_date_format',
+        default=None,
+        help='Log date format used by the logging module'
+    )
+    group._addoption(
+        '--log-cli-level',
+        dest='log_cli_level',
+        default=None,
+        help='Logging level for the console logging handler'
+    )
+    group._addoption(
+        '--log-cli-format',
+        dest='log_cli_format',
+        default=None,
+        help='Log format for the console logging handler'
+    )
+    group._addoption(
+        '--log-cli-date-format',
+        dest='log_cli_date_format',
+        default=None,
+        help='Log date format for the console logging handler'
+    )
+    group._addoption(
+        '--log-file',
+        dest='log_file',
+        default=None,
+        help='Path to a file when logging will be written to'
+    )
+    group._addoption(
+        '--log-file-level',
+        dest='log_file_level',
+        default=None,
+        help='Logging level for the file logging handler'
+    )
+    group._addoption(
+        '--log-file-format',
+        dest='log_file_format',
+        default=None,
+        help='Log format for the file logging handler'
+    )
+    group._addoption(
+        '--log-file-date-format',
+        dest='log_file_date_format',
+        default=None,
+        help='Log date format for the file logging handler'
+    )
+    group._addoption(
+        '--no-print-logs',
+        dest='log_print',
+        action='store_false',
+        default=True,
+        help='Disable printing captured logs on failed tests.'
+    )
 
 
 @pytest.hookimpl(hookwrapper=True)
diff --git a/_pytest/logging.py b/_pytest/logging.py
new file mode 100644
index 0000000..e079f8b
--- /dev/null
+++ b/_pytest/logging.py
@@ -0,0 +1,254 @@
+"""
+Logging support for pytest.
+"""
+import logging
+import sys
+import os
+from contextlib import contextmanager
+
+import py
+import pytest
+
+from _pytest.config import create_terminal_writer
+
+
+def pytest_addoption(parser):
+    """Add options to control log capturing."""
+    group = parser.getgroup('logging')
+
+    def add_option(option, dest, default=None, type=None, **kwargs):
+        parser.addini(
+            dest,
+            default=default,
+            type=type,
+            help="Default value for " + option
+        )
+        group.addoption(option, dest=dest, **kwargs)
+
+    add_option(
+        '--log-level',
+        dest='log_level',
+        default=None,
+        help='Default logging level for tests'
+    )
+    add_option(
+        '--log-format',
+        dest='log_format',
+        default='%(levelname)-8s %(name)s %(message)s',
+        help='Log format used by the logging module'
+    )
+    add_option(
+        '--log-date-format',
+        dest='log_date_format',
+        default=None,
+        help='Log date format used by the logging module'
+    )
+    add_option(
+        '--log-cli-level',
+        dest='log_cli_level',
+        default=None,
+        help='Logging level for the console logging handler'
+    )
+    add_option(
+        '--log-cli-format',
+        dest='log_cli_format',
+        default=None,
+        help='Log format for the console logging handler'
+    )
+    add_option(
+        '--log-cli-date-format',
+        dest='log_cli_date_format',
+        default=None,
+        help='Log date format for the console logging handler'
+    )
+    add_option(
+        '--log-file',
+        dest='log_file',
+        default=None,
+        help='Path to a file when logging will be written to'
+    )
+    add_option(
+        '--log-file-level',
+        dest='log_file_level',
+        default=None,
+        help='Logging level for the file logging handler'
+    )
+    add_option(
+        '--log-file-format',
+        dest='log_file_format',
+        default=None,
+        help='Log format for the file logging handler'
+    )
+    add_option(
+        '--log-file-date-format',
+        dest='log_file_date_format',
+        default=None,
+        help='Log date format for the file logging handler'
+    )
+    group.addoption(
+        '--no-print-logs',
+        dest='log_print',
+        action='store_false',
+        default=True,
+        help='Disable printing captured logs on failed tests.'
+    )
+
+
+class LogCaptureHandler(logging.StreamHandler):
+    """A logging handler that stores log records and the log text."""
+
+    def __init__(self):
+        super().__init__()
+        self.records = []
+        self.stream = None
+
+    def emit(self, record):
+        self.records.append(record)
+        super().emit(record)
+
+    def reset(self):
+        self.records = []
+
+
+class LogCaptureFixture:
+    """Fixture used to capture log messages."""
+
+    def __init__(self, handler):
+        self.handler = handler
+        self._initial_handler_level = handler.level
+
+    @property
+    def records(self):
+        """List of log records captured."""
+        return self.handler.records
+
+    @property
+    def record_tuples(self):
+        """List of tuples (logger_name, level, message) captured."""
+        return [(r.name, r.levelno, r.getMessage()) for r in self.records]
+
+    @property
+    def text(self):
+        """The formatted log text."""
+        return '\n'.join(self.handler.format(r) for r in self.records)
+
+    def set_level(self, level, logger=None):
+        """Set the log level of the handler or a logger."""
+        if logger is None:
+            self.handler.setLevel(level)
+        else:
+            logging.getLogger(logger).setLevel(level)
+
+    @contextmanager
+    def at_level(self, level, logger=None):
+        """Context manager to temporarily set the log level."""
+        if logger is None:
+            old_level = self.handler.level
+            self.handler.setLevel(level)
+            try:
+                yield
+            finally:
+                self.handler.setLevel(old_level)
+        else:
+            logger_obj = logging.getLogger(logger)
+            old_level = logger_obj.level
+            logger_obj.setLevel(level)
+            try:
+                yield
+            finally:
+                logger_obj.setLevel(old_level)
+
+    def clear(self):
+        """Clear the captured log records."""
+        self.handler.reset()
+
+
+@pytest.fixture
+def caplog(request):
+    """Fixture to capture log messages."""
+    # Get the LogCaptureHandler instance from the logging plugin
+    capture_handler = request.node._store.get('capture_handler', None)
+    if capture_handler is None:
+        # This shouldn't happen if the plugin is active
+        raise RuntimeError("Log capture fixture used without the logging plugin being active")
+    return LogCaptureFixture(capture_handler)
+
+
+class LoggingPlugin:
+    """A plugin to capture log messages."""
+
+    def __init__(self, config):
+        self.config = config
+        self.capture_handler = None
+        self.log_cli_handler = None
+        self.log_file_handler = None
+
+    def pytest_configure(self, config):
+        """Setup the logging capture."""
+        if config.getoption('log_print'):
+            self.capture_handler = LogCaptureHandler()
+            self.capture_handler.setLevel(logging.NOTSET)
+            # Apply format
+            formatter = logging.Formatter(
+                fmt=config.getini('log_format'),
+                datefmt=config.getini('log_date_format')
+            )
+            self.capture_handler.setFormatter(formatter)
+            # Add to root logger
+            logging.getLogger().addHandler(self.capture_handler)
+
+        # Setup CLI logging if requested
+        log_cli_level = config.getoption('log_cli_level')
+        if log_cli_level is not None:
+            self.log_cli_handler = logging.StreamHandler(sys.stderr)
+            self.log_cli_handler.setLevel(log_cli_level)
+            formatter = logging.Formatter(
+                fmt=config.getini('log_cli_format') or config.getini('log_format'),
+                datefmt=config.getini('log_cli_date_format') or config.getini('log_date_format')
+            )
+            self.log_cli_handler.setFormatter(formatter)
+            logging.getLogger().addHandler(self.log_cli_handler)
+
+        # Setup file logging if requested
+        log_file = config.getoption('log_file')
+        if log_file is not None:
+            self.log_file_handler = logging.FileHandler(log_file, mode='w')
+            log_file_level = config.getoption('log_file_level') or logging.NOTSET
+            self.log_file_handler.setLevel(log_file_level)
+            formatter = logging.Formatter(
+                fmt=config.getini('log_file_format') or config.getini('log_format'),
+                datefmt=config.getini('log_file_date_format') or config.getini('log_date_format')
+            )
+            self.log_file_handler.setFormatter(formatter)
+            logging.getLogger().addHandler(self.log_file_handler)
+
+    def pytest_runtest_setup(self, item):
+        """Reset the capture handler at the start of each test."""
+        if self.capture_handler:
+            self.capture_handler.reset()
+            # Store the handler on the item for the caplog fixture
+            item._store['capture_handler'] = self.capture_handler
+
+    def pytest_runtest_teardown(self, item):
+        """Clean up after each test."""
+        if self.capture_handler:
+            # Remove the handler from the item
+            if 'capture_handler' in item._store:
+                del item._store['capture_handler']
+
+    def pytest_unconfigure(self):
+        """Clean up the logging handlers."""
+        root_logger = logging.getLogger()
+        if self.capture_handler:
+            root_logger.removeHandler(self.capture_handler)
+        if self.log_cli_handler:
+            root_logger.removeHandler(self.log_cli_handler)
+        if self.log_file_handler:
+            root_logger.removeHandler(self.log_file_handler)
+
+
+def pytest_configure(config):
+    """Register the logging plugin if not disabled."""
+    if config.getoption('log_print') or config.getoption('log_cli_level') or config.getoption('log_file'):
+        plugin = LoggingPlugin(config)
+        config.pluginmanager.register(plugin, 'logging-plugin')
